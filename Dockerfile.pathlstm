FROM frankierr/mateplus:base
MAINTAINER Frankie Robertson <frankie@robertson.name>

RUN git clone https://github.com/microth/PathLSTM.git

COPY fetch-pathlstm-reqs.sh /PathLSTM/scripts/
COPY parse-pathlstm.sh /PathLSTM/scripts/parse.sh
RUN chmod +x /PathLSTM/scripts/*.sh

RUN cd PathLSTM && \
  ./scripts/fetch-pathlstm-reqs.sh && \
  rm ./scripts/fetch-pathlstm-reqs.sh

CMD cd PathLSTM && \
  tee in.txt && \
  ./scripts/parse.sh in.txt && \
  cat out.txt && \
  rm in.txt out.txt
